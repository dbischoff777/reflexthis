# Product Requirements Document: ReflexThis - Reflex Training Game

## Executive Summary
ReflexThis is a mobile-first reflex training and testing game built with Next.js, shadcn/ui, and Tailwind CSS. The game challenges players to press highlighted buttons as quickly as possible, with progressive difficulty that increases speed and complexity based on score. The game features a modern, sleek, cyberpunk-inspired UI optimized for mobile devices in landscape orientation.

## Project Overview
- **Project Name:** ReflexThis
- **Version:** 1.0.0
- **Platform:** Web (Mobile-first, optimized for phones)
- **Tech Stack:** Next.js, shadcn/ui, Tailwind CSS
- **Target Devices:** Smartphones (landscape mode preferred)

## Core Game Mechanics

### Game Layout
The game consists of 3 rows of circular buttons arranged as follows:
- **Top Row:** 3 circular buttons
- **Middle Row:** 4 circular buttons
- **Bottom Row:** 3 circular buttons
- **Total Buttons:** 10 circular buttons

### Gameplay Flow
1. A button (or multiple buttons) lights up/highlights to signal the player
2. Player must press the highlighted button(s) before the highlight disappears
3. Successful press: Score increases, highlight turns off
4. Failed press (pressed wrong button or too late): Lose 1 life
5. A new random button(s) is highlighted
6. Process repeats until game over

### Lives & Game Over
- Players start with 5 lives
- Each error costs 1 life
- Game ends when all 5 lives are lost
- Game over screen shows final score

### Progressive Difficulty
- **Speed Scaling:** As player score increases, the time buttons remain highlighted decreases
- **Speed Formula:** Base time decreases proportionally with score milestones
- **Multiple Buttons:** 
  - Initially: 1 button highlighted at a time
  - As score increases: Up to 2 buttons simultaneously
  - Higher scores: Up to 3 buttons simultaneously (maximum)
- **Difficulty Milestones:** Difficulty increases at specific score thresholds

## User Interface Requirements

### Design System
- **Theme:** Modern, sleek, cyberpunk-inspired
- **Color Palette:** Dark theme with neon accents (cyans, magentas, electric blues)
- **Typography:** Futuristic, highly readable fonts
- **UI Elements:** Rounded buttons with glow effects, smooth animations
- **Accessibility:** High contrast ratios for readability, large touch targets (minimum 44x44px)

### Landing Page
**Layout:**
- Warm welcome message/heading
- Prominent "Start Game" button (primary CTA)
- Build information displayed at bottom center (version, build date, etc.)
- Background should match cyberpunk aesthetic

**Elements:**
- Hero section with game title
- Welcome text/message
- Start button (large, eye-catching)
- Build info footer (small text, centered)

### Game Page
**Layout:**
- Header bar at top with:
  - Score display (left side)
  - Lives indicator (center)
  - Sound toggle button (right side)
  - Quit button (top right corner)
- Main game area with button grid (3-4-3 layout)
- Game over overlay/modal when lives reach 0

**Game Controls:**
- Circular buttons arranged in 3-4-3 grid
- Buttons have default state (normal appearance)
- Highlighted state (glowing, pulsing animation)
- Pressed state (visual feedback on touch/click)
- Button states should be visually distinct

**Game Information Display:**
- Current score (prominently displayed)
- Lives remaining (visual indicator, e.g., hearts or icons)
- Current difficulty level indicator (optional)

**Sound Controls:**
- Toggle button in header to turn sound on/off
- Sound effects for:
  - Button highlight
  - Successful button press
  - Failed button press (error)
  - Life lost
  - Game over
  - Background music (optional)

**Quit Button:**
- Located in top right corner of header
- Returns player to landing page
- Confirmation dialog (optional) to prevent accidental quits

## Technical Requirements

### Framework & Libraries
- **Next.js:** Latest stable version (App Router)
- **shadcn/ui:** For UI component library
- **Tailwind CSS:** For styling and responsive design
- **TypeScript:** For type safety

### Mobile Optimization
- **Primary Focus:** Smartphone devices (iOS & Android)
- **Orientation:** Landscape mode preferred for gameplay
- **Touch Optimization:** 
  - Large touch targets (minimum 44x44px per button)
  - Responsive to touch events
  - Prevent zoom on double-tap
  - Optimized touch delay
- **Performance:**
  - Smooth 60fps animations
  - Minimal re-renders
  - Optimized button state management
  - Efficient random button selection algorithm

### Responsive Design
- **Mobile First:** Designed primarily for phones
- **Landscape Mode:** Optimal gameplay experience in landscape
- **Portrait Mode:** Should still function but may show warning/preference message
- **Tablet Support:** Responsive scaling for larger screens
- **Desktop Support:** Functional but not primary target

### State Management
- Game state (score, lives, difficulty)
- Button highlight states
- Timer/interval management
- Sound settings persistence (localStorage)
- Game session state

### Animation & Visual Effects
- Smooth button highlight transitions
- Glowing/pulsing effects on highlighted buttons
- Press feedback animations
- Score increment animations
- Life lost visual effects
- Game over screen transitions
- Cyberpunk-inspired particle effects (optional)

### Performance Considerations
- Debounce/throttle button presses to prevent spam
- Efficient random number generation
- Optimized re-renders (React.memo, useMemo, useCallback where appropriate)
- Lazy loading for game over screens
- Minimal bundle size

## Game Logic Specifications

### Button Highlighting Algorithm
- Random selection from 10 available buttons
- No immediate repeat of same button (unless multiple buttons are active)
- Simultaneous highlights:
  - Level 1 (Score 0-50): 1 button at a time
  - Level 2 (Score 51-150): 1-2 buttons simultaneously
  - Level 3 (Score 151+): 1-3 buttons simultaneously
- Minimum time between button presses (cooldown)

### Timing System
- Base highlight duration: ~2000ms (adjustable)
- Minimum highlight duration: ~300ms (hard limit)
- Speed decrease formula: 
  - Score 0-50: Base speed
  - Score 51-100: 10% faster
  - Score 101-200: 20% faster
  - Score 201+: Continue scaling (max 70% faster)

### Scoring System
- +1 point per successful button press
- Score persists until game over
- Display score prominently during gameplay
- Save high score (localStorage) - optional

### Life System
- Start with 5 lives
- Lose 1 life per error:
  - Pressing wrong button
  - Not pressing highlighted button in time
- Visual feedback when life is lost
- Game over when lives reach 0

## Build & Version Information

### Build Info Display
- Display on landing page bottom center
- Include:
  - Version number (e.g., "v1.0.0")
  - Build date/timestamp
  - Optional: Git commit hash (short)

### Environment Configuration
- Development vs Production builds
- Environment-specific configuration
- Build timestamp generation

## Future Enhancements (Out of Scope for v1.0)
- Leaderboard system
- Multiple difficulty presets
- Customizable themes
- Statistics/history tracking
- Social sharing of scores
- Achievement system
- Sound customization options

## Non-Functional Requirements

### Performance
- Page load time: < 3 seconds on 4G connection
- Time to Interactive: < 5 seconds
- Smooth 60fps during gameplay
- No noticeable lag in button interactions

### Accessibility
- Keyboard navigation support (desktop)
- Screen reader compatibility
- High contrast mode support
- Clear visual feedback for all interactions

### Browser Support
- Modern browsers (Chrome, Safari, Firefox, Edge)
- iOS Safari (latest 2 versions)
- Chrome Android (latest 2 versions)
- Progressive Web App (PWA) capabilities (optional)

### Code Quality
- TypeScript strict mode enabled
- ESLint configuration
- Component-based architecture
- Reusable UI components
- Clean, maintainable code structure

## Success Metrics
- Game runs smoothly on target mobile devices
- Intuitive user experience (no tutorial needed)
- Responsive to touch inputs
- Visually appealing cyberpunk aesthetic
- Smooth difficulty progression
- Engaging gameplay loop

## Development Phases

### Phase 1: Core Setup
- Next.js project setup with shadcn/ui and Tailwind CSS
- Project structure and routing
- Base UI components and styling system

### Phase 2: Landing Page
- Landing page design and implementation
- Navigation to game page
- Build info display

### Phase 3: Game Layout
- Button grid layout (3-4-3)
- Responsive design for mobile landscape
- Base button components

### Phase 4: Game Logic
- Button highlighting system
- Score tracking
- Life system
- Game over detection

### Phase 5: Progressive Difficulty
- Speed scaling based on score
- Multiple button highlighting
- Difficulty level calculation

### Phase 6: UI Polish
- Cyberpunk styling and animations
- Sound integration
- Header controls (sound toggle, quit)
- Visual feedback improvements

### Phase 7: Mobile Optimization
- Touch event optimization
- Landscape orientation preference
- Performance optimization
- Testing on real devices

### Phase 8: Final Polish
- Bug fixes
- UI/UX refinements
- Performance tuning
- Final testing

